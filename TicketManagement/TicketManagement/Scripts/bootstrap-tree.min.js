$(function () { $(".tree li:has(ul)").addClass("parent_li").find(" > span").attr("title", "Collapse this branch"), $(".tree li.parent_li > span").on("click", function (i) { var s = $(this).parent("li.parent_li").find(" > ul > li"); s.is(":visible") ? (s.hide("fast"), $(this).attr("title", "Expand this branch").find(" > i").addClass("icon-plus-sign").removeClass("icon-minus-sign")) : (s.show("fast"), $(this).attr("title", "Collapse this branch").find(" > i").addClass("icon-minus-sign").removeClass("icon-plus-sign")), i.stopPropagation() }) });